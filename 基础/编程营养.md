## 操作系统

### 线程和进程

> 进程是执行着的应用程序，而线程是进程内部的一个执行序列。一个进程可以有多个线程。
>
> 进程比线程要大。一个程序至少要有一个进程，一个进程至少要有一个线程。

浏览器就是多进程多线程的

- 渲染引擎：渲染引擎内部是多线程的,内部包含了两个最重要的线程ui线程和js线程。

- js单线程：JavaScript最大的特点就是单线程的，其实应该说其主线程是单线程的。

- 浏览器事件触发线程(用来控制事件循环,存放setTimeout、浏览器事件、ajax的回调函数)

- 定时触发器线程(setTimeout定时器所在线程)

- 异步HTTP请求线程(ajax请求线程)

**进程和线程的区别**

- 进程是执行着的应用程序，而线程是进程内部的一个执行序列。一个进程可以有多个线程。

- 根本区别：进程是操作系统资源分配的基本单位，而线程是任务调度和执行的基本单位 。（线程可由CPU直接运行的实体）

- 内存分配方面：系统在运行的时候会为每个进程分配不同的内存空间，而对于线程而言，除了COU，系统不会为线程分配内存（线程所使用的资源来自其所属进程的资源）。线程组之间只能共享资源。

- CPU切换一个线程比切换进行开销小。创建同理。

- 所处环境：在操作系统中能同时运行多个进程（程序）；而在同一个进程中有多个线程同时执行 （通过CPU调度，在每个时间片中只有一个线程执行）

- 通信：线程之间通信更方便，同一个进程下，线程共享全局变量，静态变量等数据，进程之间的通信需要以通信的方式 （IPC）进行 

## 代理服务器

### 什么是代理服务器 ？

代理服务器，客户机在发送请求时，不会直接发送给目的主机，而是先发送给代理服务器，代理服务器受到请求后，向主机获取资源，存放到代理服务器的硬盘中，并回传给客户端。

![img](https://gitee.com/youngstory/images/raw/master/img/202111060849793.png)

### 为什么要使用代理服务器？

1. 访问速度快

   代理服务器会将从主机拿到的资源给自己存一份，客户端下次访问同样的站点数据时，直接从代理服务器硬盘中拿。

2. 安全

   代理服务器可以一些 行为过滤设置，充当防火墙的作用。

3. 通过代理服务器访问不能访问的目标站点

   如翻墙，就是我们使用代理，让他去帮我们去访问外网。

## 正向代理和反向代理

### 正向代理

正向代理，**架设在客户机和目标主机之间**，只用于代理内部网络对 Internet的连接请求，**客户端必须指定代理服务器的IP地址，还有代理程序的端口**，并将本来要直接发送到 Web 服务器上的http请求 发送到代理服务器中。 

![img](https://gitee.com/youngstory/images/raw/master/img/202111060859088.png)

用途：

1. 访问原来无法访问的资源，如google
2. 可以做缓存，加速访问资源
3. 对客户端访问授权，上网进行认证
4. 代理可以记录用户访问记录，对外隐藏用户信息

### 反向代理

客户端不需要任何配置就可以访问。

**反向代理服务器架设在服务端**，通过缓冲经常被请求页面来缓解服务器的工作量，将客户机请求转发给内部网络上的目标服务器；并将从服务器上得到的结果返回给Internet上请求连接的客户端，此时代理服务器与目标主机一起对外表现为一个服务器。

![img](https://gitee.com/youngstory/images/raw/master/img/202111060909020.png)

用途：

1. 保证内网的安全，可以使用反向代理提供WAF功能，阻止web攻击
2. 负载均衡，通过反向代理服务器来优化网站的负载