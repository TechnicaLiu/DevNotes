## HTTP的 三次握手和四次握手 

> 三次握手建立链接，四次挥手断开链接。

三次握手

<img src="https://gitee.com/youngstory/images/raw/master/img/202110231651941.png" alt="image-20210830160920076" style="zoom:50%;" />

* 第一次：C端发送SYN=1的请求报文，此时C端 进入SYN SENT状态，等待服务器确认。
* 第二次：S端收到C端发送的SYN 报名（建立连接请求）后，S端必须返回确认好并且同时发送一条SYN+ACK报文，此时进入SYN RCVD状态。
* 第三次: C端收到 S端发的 ACK+SYN报文，需要返回一个应答ACK的报文，此时连接会进入半连接状态的队列，当S端收到ACK后，一条完整的全双工TCP连接建立完成，双方进入 ESTABLISHED状态 。

四次握手

<img src="https://gitee.com/youngstory/images/raw/master/img/202110231651054.png" alt="image-20210830162335866" style="zoom:50%;" />

* 第一次：当C端的应用程序结束数据传输时，会向S端发送一个带有FIN 附加 标记的报文段，此时C端进入FIN_WAIT1状态，C端不能再发送数据到S端 。
* 第二次：S端收到FIN 报文会响应一个ACK报文，S端进入 CLOSE_WAIT状态。进入此状态后S端把剩余未发送的数据发送到C端，C端收到 S端 的ACK 之后，进入 FIN_WAIT2状态。同时继续接收S端传输的其他 数据包。
* 第三次：S端处理完自己待发送的数据之后，也会发送FIN断开连接的请求，S端进入LAST_ACK状态。
* 第四次：C端收到S端的断开连接请求后会启动一个定时器，该定时器时长是2MSL ，同时发送最后一次 ACK 报文。

## TCP UDP 区别

> TCP是向上层提供面向连接的可靠服务，UDP 向上层提供无连接不可靠服务 。 对数据准确性要求高的可以选择 TCP ，速度没有udp 快

具体区别：**在基于 TCP 进行通信时**，通信双方需要先建立一个 TCP 连接，建立连接需要经过**三次握手，**握手成功才可以进行通信，**UDP在通信过程中，**它并不像 TCP 那样需要先建立一个连接，**只要（目的地址，端口号，源地址）确定了**，就可以直接发送信息报文，并且不需要确保服务端一定能收到或收到完整的数据。它仅仅提供了校验和机制来保障一个报文是否完整，若校验失败，则直接丢弃报文，不做任何处理。

| **区别**     | **UDP**                                    | **TCP**                                |
| ------------ | ------------------------------------------ | -------------------------------------- |
| 是否连接     | 无连接                                     | 有连接                                 |
| 是否可靠     | 不可靠                                     | 可靠                                   |
| 连接对象个数 | 一对一，一对多，多对一，多对多相互通信     | 一对一                                 |
| 传输方式     | 面向报文                                   | 面向字节流                             |
| 首部开销     | 首部开销小，仅8字节                        | 首部最小20字节最大60字节               |
| 使用场景     | 适用于实时应用，如IP电话，视频会议，直播等 | 适用于要求可靠传输的应用，例如文件传输 |

## Http和Https区别

* http 的url以http:// 开头 ，而https的url以 https:// 开头
* http 传输不安全，https 安全
* http 标准端口是80，https的标准端口是443
* 在OSI 网络模型中，http工作于应用层，而https 的安全传输机制工作在 传输层
* http 无法加密，而https 对传输的数据进行加密
* http 无需证书，而https 需要CA机构颁发的 SSL 证书 

## 理解xss，csrf,ddos攻击原理以及避免方式

**xss(cross-Site Scripting ,跨站脚本攻击)**是一种代码注入攻击，攻击者在目标网站注入恶意代码，当被攻击者登录网站时就会执行这些恶意代码。这些脚本可以读取 cookie ,session tokens ,或者其他敏感的网站信息，对用户进行钓鱼欺诈 。

**csrf (Cross-site request forgrey) 跨站请求伪造** ： 攻击者诱导受害者进入第三方网站，在第三方网站中，向被攻击网站发送跨站请求，利用受害者在被攻击网站已经获取的注册凭证，烧过后台的用户验证，达到冒充用户对被攻击的网站执行某项操作的目的。

**DDOS ：** 又叫分布式拒绝服务，其原理就是利用大量的请求造成资源过载，导致服务不可用。

xss避免方式 ：

* `url`参数使用`encodeURIComponent`方法转义
* 尽量不要有`InnerHtml`插入`HTML`内容
* 使用特殊符号、标签转义符。

csrf 避免方式：

* 添加验证码
* 使用token  
  * 服务端给用户生成一个token,加密后传递给用户
  * 用户在提交请求时，需要携带这个token 
  * 服务端验证token 是否正确
* ddos避免方式：
  * 限制单ip 请求频率
  * 防火墙等防护设置 禁止ICMP 包等
  * 检查特权端口的开放  

