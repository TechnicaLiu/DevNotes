### 起步

#### 基础语法

1. 获取数据 this.data. 

2. 设置数据  this.setData({  键：值   })

3. 绑定事件  bindtap = " "

4. for 循环 

   ``` 
     <view wx:for="{{menuList}}" wx:key='index' >{{item.name}}</view>
   ```

5. if 判断  if 判断    wx: if =     wx:elif=      wx:else 

#### api

1. 跳转到tabbar         wx.switchTab
2. 关闭当前页面，跳转到应用内得某个页面   wx.redirect
3. 页面跳转  wx.navigateTo({   url :  " " })

#### 组件

1. scroll-view  限定滚动高度

   * scroll-y     父元素设置固定height  
   * scroll-x    父元素设置固定width
   * bindscrolltolower="lower"   判断触底

2. bindscroll='scroll'  监听滚动事件  拿到e.dataill.scrollTop 坐标值

3. scroll-with-animation=true 有动画效果

4. scroll-into-view="id编号"  设置对应的分类栏目的  scrollTop 滚动的位置

5. **父传子**  

   1. 子组件通过 propertise 接收 

   2. ``` 
      // 新建一个components 文件，添加组件文件 
      // 父组件 json中   绑定子组件   
      
      {
        "usingComponents": {
          "NavHeader":"/components/NavHeader/NavHeader"
        }
      }
      
      // 在父组件中使用 data数据 
      
      <mydemo fa="{{fa}}"></mydemo>
      
      // 在子组件js文件中接收 
      properties {  
             fa: {
              type:String,
              value:'haha'
           }
        },
        
      // 在子组件 xml文件中使用 
      
      <view>父组件内容 {{fa}}</view>
      ```

6. 子传父 

   1. 通过事件触发和事件监听还传值，与Vue大同小异 

   2.  ``` 
      // 子组件绑定事件 触发  
       <button bindtap="mydemo">触发子传父</button> 
      // 子组件 js中 事件方法 
      methods: {
            mydemo(){
              this.triggerEvent('myEvent',this.data.str)   // 可携带参数 
            }
        }
      // 父组件负责 监听 
      <mydemo bindmyEvent='sent'></mydemo> 
      // 拿到子组件的数据和方法
       sent(e){
            console.log(e.detail);
        },
      
      ```

7. 获取数据

   1. get三步走   (url 接口     header固定格式   success （res）接收返回来的数据)

      ``` 
      	wx.request({ 
                  url: 'http://localhost:3000/api/catesAndGoods',
                  header: {
                          'content-type': 'application/json' // 默认值
                        },
                  success: res => {
                      console.log(res)
                  this.setData({
                  menuList: res.data.data,   // 渲染左侧列表
      		
      		})
      ```

####  简单的API封装

``` js
1.创建 APi 文件夹, 内有api.js  connector.js 
2.书写request 统一模块  connector 
    module.exports={
      request:(url,methods,data)=>{
        return new Promise((resolve,reject)=>{
          wx.request({
            url: url,
            data:data,
            methods:methods,
            header:{
              "content-type":"appLication/x-www-form-urlencoded"
            },
            // 成功回调
            success:(res)=>{
              resolve(res.data)
            },
            fail:()=>{
              reject('请求失败')
            }
          })

        })

      }
    }
3. api.js 
	const {request}=require('./connector')

module.exports={
  // 封装新闻列表
  getNews:()=>{
    return request("http://www.liulongbin.top:3005/api/getnewslist","get",{})
  }
}
4. 使用 
	const { getNews } = require("../../api/api")
    onLoad: function (options) {
     getNews().then(res=>{
       this.setData({
         newsList:res.message
       })
     })
  },
```

### 云开发

#### App.js文件配置云开发环境 

``` 
App({
  onLaunch() {
      wx.cloud.init({
        env:'cloud1-7gg4obys8d804674'  // 云开发环境Id
      })
  },
})

初始化 index.js 
	const DB=wx.cloud.database().collection('list')
```

#### 数据库增加数据

``` 
// 添加数据
  addData(){
    DB.add({
      data:{
        name:'石头老师1',
        age:'18'
      },
      success(res){
        console.log('添加成功',res);
      },
      fail(res){
        console.log('添加失败',res);
      }
    })
  }

})

// 输入框案例 
    <input placeholder="请输入用户名" bindinput="addName"></input>
    <input placeholder="请输入年龄" bindinput="addAge"></input>
// 全局定义 username 和 age  
    let username= ""
    let age= ""
// 通过bindinput  获取	
     // 获取用户名
      addName(e){
        username=e.detail.value

      },
      // 获取年龄 
      addAge(e){
        age=e.detail.value
      },
// 添加到 DB.add 方法中 
 DB.add({
      data:{
        name:username,
        age:age
      },get 获取数据 
```

#### 删除数据

``` 
// html 
<input placeholder="填写要删除的用户id" bindinput="del"></input>
<button bindtap="delData">删除数据</button>
// js  全局定义id 
let id='' 
// page中 添加方法 拿到数据
del(e){
    id=e.detail.value
  },
// 添加删除事件 
delData(){
    DB.doc(id).remove({
      success(res){
        console.log('删除成功');
      }
    })
  }
```

#### 更新数据

```
// 与添加 删除同理  html设置 Bindinput 和绑定事件  
 updateData(){
    DB.doc(id).update({
       data:{
          age:age
       },
        success(res){
          console.log('更新成功');
        }
    })
  }
```



#### 获取数据库数据 

``` 
// database.js   传统写法    注意this指向
onLoad(){
    wx.cloud.database().collection('goods')
    .get({
      success(res){
        console.log('请求成功',res);
      },
      fail(err){
        console.log('请求失败',err);
      }
    })
  }
 //  es6简洁写法  
  wx.cloud.database().collection('goods').get()
    .then(res=>{
      console.log('请求成功');
    })
    .catch(error=>{
      console.log('请求失败');
  })
  
```





