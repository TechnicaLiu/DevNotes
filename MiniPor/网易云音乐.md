# ä»‹ç»

ä»¿ç½‘æ˜“äº‘éŸ³ä¹çš„ä¸€æ¬¾å¾®ä¿¡å°ç¨‹åºï¼Œåœ¨å¾®ä¿¡å°ç¨‹åºå¼€å‘å·¥å…·ä¸­ç¼–ç ã€‚

æŠ€æœ¯é€‰å‹ï¼š æœ¬åœ° Node æœåŠ¡å™¨ + ç½‘æ˜“äº‘å¼€æ”¾æ¥å£ API

# åŠŸèƒ½å®ç°

## é¦–é¡µ

æ¸²æŸ“ banner æ•°æ®æ—¶ï¼Œéœ€è¦ç”¨ wx:for ï¼ŒåŒæ—¶éœ€è¦æ³¨æ„ **image çš„ src** å‰é¢ä¸éœ€è¦åŠ  `:` ä¸è¦å’Œ vue æ··è‚´

```js
<swiper-item wx:for="{{bannerData}}" wx:key="index">
  <image src="{{item.pic}}"></image>
</swiper-item>
```

åœ¨ wx-for æ—¶ï¼Œå¦‚æœéœ€è¦**åµŒå¥—å¾ªç¯éå†**ï¼Œæˆ‘ä»¬å¯ä»¥ ä½¿ç”¨ wx:for-item='' æ¥æŒ‡å®š å­å¾ªç¯çš„ item

```js
 <swiper-item wx:for="{{topListData}}" wx:key="item" >
       <view class="title">{{item.name}}</view>
       <view class="musicItem" wx:for="{{item.tracks}}" wx:key="item" wx:for-item="music" >
        <image src="{{music.al.picUrl}}"></image>
        <text class="count">{{index+1}}</text>
        <text class="songName">{{music.ar[0].name}}</text>
       </view>

  </swiper-item>
```

## æˆ‘çš„é¡µé¢

### æ‰‹æŒ‡æ»‘åŠ¨æ•ˆæœ

ç»™è¦è®¾ç½®æ»‘åŠ¨æ•ˆæœçš„ view å®¹å™¨ è®¾ç½® æ‰‹æŒ‡æ»‘åŠ¨ ä¸‰ä»¶å¥— `bindtouchstart` ` bindtouchmove` `bindtouchend`

```html
<view
  class="cover-container"
  bindtouchstart="handleTouchStart"
  bindtouchmove="handleTouchMove"
  bindtouchend="handleTouchEnd"
  style="transform: {{coverTransform}};transition: {{coverTransition}}"
></view>
```

åœ¨ js æ–‡ä»¶ è¿›è¡Œ é€»è¾‘å¤„ç†ï¼š

1. å®šä¹‰ æ‰‹æŒ‡çš„å¼€å§‹æ»‘åŠ¨åæ ‡ï¼Œç»“æŸæ»‘åŠ¨åæ ‡ï¼Œ æ»‘åŠ¨è·ç¦»å˜é‡

   ```js
   let startY = 0;//æ‰‹æŒ‡èµ·å§‹åæ ‡
   let moveY = 0;//æ‰‹æŒ‡ç§»åŠ¨åæ ‡
   let moveDistance = 0;//æ‰‹æŒ‡ç§»åŠ¨è·ç¦»


   data: {
       coverTransform: 'translateY(0)',
       coverTransition: '',
    },

   ```

2. é€šè¿‡ event äº‹ä»¶ æ‹¿åˆ° åæ ‡å€¼ clientY ,è®¡ç®—å‡ºç§»åŠ¨è·ç¦»ï¼ŒåŠ¨æ€æ›´æ–° transform å±æ€§

   ```js
     handleTouchStart(event){
       this.setData({
         coverTransition: ''
       })
       //èµ·å§‹æ‰‹æŒ‡åæ ‡
       startY = event.touches[0].clientY;
     },
     handleTouchMove(event){
       moveY = event.touches[0].clientY;
       moveDistance = moveY - startY;

       if(moveDistance <= 0){
         return;
       }
       if(moveDistance >= 80){
         moveDistance = 80;
       }

       //åŠ¨æ€æ›´æ–°coverTransform
       this.setData({
         coverTransform: 'translateY('+moveDistance+'rpx)'
       })
     },
   ```

3. æ»‘åŠ¨ç»“æŸåï¼Œæ¢å¤é»˜è®¤å€¼ï¼ˆtranslateY(0)ï¼‰ã€‚

   ```js
   handleTouchEnd(){
           //é‡ç½®coverTransform
           this.setData({
             coverTransform: 'translateY(0)',
             coverTransition: 'transform 1s linear'
           })
     },
   ```

## è§†é¢‘é¡µé¢

1. ç»™ scroll-view è®¾ç½®ä¸€ä¸ª æ»šåŠ¨æ•ˆæœ

   é¦–å…ˆè¦ä¿è¯ å€¼åº”ä¸ºæŸå­å…ƒç´  idï¼ˆ**id ä¸èƒ½ä»¥æ•°å­—å¼€å¤´**ï¼‰ , `scroll-with-animation` ä¸ºæ»šåŠ¨æ·»åŠ è¿‡æ¸¡æ•ˆæœ

   ```js
   	// navId æ˜¯é¼ æ ‡ç‚¹å‡»æŸä¸€ä¸ªitemï¼ŒæŠŠitemçš„id è®¾ä¸ºäº†dataä¸­çš„ navId,

   <scroll-view
       scroll-into-view="{{'scroll'+ navId}}"  scroll-with-animation>
          <view id="{{'scroll'+item.id}}">
             <view>
               {{item.name}}
             </view>
          </view>
   </scroll-view>
   ```

2. åŒä¸€ä¸ªé¡µé¢åªå…è®¸æœ‰ä¸€ä¸ªè§†é¢‘æ’­æ”¾

   è§£å†³æ€è·¯:

   1. åœ¨ç‚¹å‡»æ’­æ”¾çš„äº‹ä»¶ä¸­ï¼Œéœ€è¦æ‰¾åˆ°ä¸Šä¸€ä¸ªæ’­æ”¾çš„è§†é¢‘
   2. åœ¨æ’­æ”¾æ–°è§†é¢‘çš„æ—¶å€™ï¼ŒæŠŠä¸Šä¸€ä¸ªè§†é¢‘æš‚åœ

   è§£å†³æ–¹æ³•ï¼š é€šè¿‡ wx.createVideoContextï¼ˆidï¼‰ æ¥ä¸ºç‚¹å‡»çš„è§†é¢‘åˆ›å»º å®ä¾‹å¯¹è±¡ï¼Œå‚æ•°ä¸º è§†é¢‘çš„å”¯ä¸€ id

   ```js
     <video src="{{item.data.urlInfo.url}}" 	show-center-play-btn='{{false}}' id="{{item.data.vid}}" 	bindplay='handleVideo'></video>


      handleVideo(event){
       let vid = event.currentTarget.id;
        this.vid !== vid && this.videoContext && this.videoContext.stop();
     this.vid=vid;
        this.videoContext= wx.createVideoContext(vid);

     },
   ```

3. è§†é¢‘ä¼˜åŒ–ï¼ŒåŒä¸€ä¸ªé¡µé¢æ”¾å¤šä¸ªè§†é¢‘å®¹æ˜“äº§ç”Ÿå¡é¡¿ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆæ¬¡æ¸²æŸ“æ—¶æ˜¾ç¤ºè§†é¢‘çš„å°ç‰‡å›¾ç‰‡ï¼Œç‚¹å‡»å›¾ç‰‡è¯ï¼Œå°†å…¶æ›¿æ¢ä¸º video ç»„ä»¶ã€‚

   è§£å†³æ–¹æ³•ï¼š

   ```js
    // å›¾ç‰‡å’Œè§†é¢‘ å…±ç”¨ id å’Œæ ·å¼ å¤„ç†å‡½æ•°
   // å½“æ•è·åˆ°ç”¨æˆ·ç‚¹å‡»çš„ id å’Œ itemçš„id ç›¸åŒæ—¶ï¼Œè®©ä»–æ˜¾ç¤º è§†é¢‘ç»„ä»¶ï¼Œå…¶ä»–çš„éƒ½ æ˜¾ç¤º å›¾ç‰‡ç»„ä»¶
    <view class="videoItem" wx:for="{{videoList}}" wx:key="item">
             <video wx:if='{{videoId === item.data.vid }}'class="common" src="{{item.data.urlInfo.url}}" 	show-center-play-btn='{{false}}' id="{{item.data.vid}}" 	bindplay='handleVideo' ></video>
             <image wx:else class="common"  src="{{item.data.coverUrl}}" id="{{item.data.vid}}" bindtap="handleVideo"></image>
    </view>

   // ç‚¹å‡»äº‹ä»¶å¤„ç†å‡½æ•°
   handleVideo(event){
       let vid = event.currentTarget.id;
        this.vid !== vid && this.videoContext && this.videoContext.stop();
        this.vid=vid;
        this.setData({
          videoId:vid
     })

        this.videoContext= wx.createVideoContext(vid); // è§†é¢‘å®ä¾‹åŒ–
        this.videoContext.play();// ç‚¹å‡»è§†é¢‘åï¼Œè‡ªåŠ¨æ’­æ”¾

     },

   ```

4. è§†é¢‘æ»šåŠ¨æ—¶ï¼Œå¯¼èˆªæ å›ºå®šä½ç½®ä¸å˜

   è§£å†³æ€è·¯ï¼š ç»™ è§†é¢‘ç»„ä»¶çš„ scroll-view è®¾ç½® é«˜åº¦ ï¼Œå¦‚ä½•è®¡ç®—å‘¢ ï¼Ÿ

   æ–¹æ³•ï¼š

   ```js
   // åˆ©ç”¨ css3æ–°ç‰¹æ€§ calc æ¥è®¡ç®—
   // æ³¨æ„ï¼ ä½¿ç”¨ calc æ—¶ ï¼Œ - å·¦å³è¦æœ‰ç©ºæ ¼
   .videoScroll {
     height: calc(100vh - 160rpx)  // 1vh ç­‰äº 1% çš„å¯è§†çª—å£é«˜åº¦
   }
   ```

5. è§†é¢‘è‡ªåŠ¨ä»ä¸Šæ¬¡æ’­æ”¾çš„ä½ç½® å¼€å§‹æ’­æ”¾

   æ€è·¯ï¼šæ–°å»ºä¸€ä¸ªæ•°ç»„ç”¨æ¥ä¿å­˜æ¯ä¸ªè§†é¢‘çš„ id å’Œ currentTIme å³æ’­æ”¾æ—¶é—´ï¼Œæ¯æ¬¡ç”¨æˆ·ç‚¹å‡»è§†é¢‘ï¼Œå…ˆçœ‹çœ‹è¯¥è§†é¢‘ ID æ˜¯å¦å­˜åœ¨äºè¿™ä¸ªæ•°ç»„ä¸­ï¼Œç„¶å é€šè¿‡ api seek è·³è½¬åˆ°å¯¹åº”çš„ä½ç½®æ’­æ”¾

   ```js
    <video id="{{item.data.vid}}" bindtimeupdate="videoTimeHandle" bindplay='handleVideo' ></video>

   // åˆ›å»º è§†é¢‘æ’­æ”¾çš„è®°å½•æ•°ç»„
     videoTimeHandle(event){
         let videoTimeObj={vid:event.currentTarget.id,currentTime:event.detail.currentTime};
         let {videoUpdateTime} = this.data;
         let videoItem =  videoUpdateTime.find(item=>item.vid === videoTimeObj.vid );
         if(videoItem){
           videoItem.currentTime= videoTimeObj.currentTime;
         }else{
           videoUpdateTime.push(videoTimeObj);
         }
         this.setData({
           videoUpdateTime
         })

     },

     // ç”¨æˆ·ç‚¹å‡»è§†é¢‘ çš„äº‹ä»¶å‡½æ•°
     handleVideo(event){
       let vid = event.currentTarget.id;
     /*    this.vid !== vid && this.videoContext && this.videoContext.stop();
        this.vid=vid; */
        this.setData({
          videoId:vid
        })

        this.videoContext= wx.createVideoContext(vid); // è§†é¢‘å®ä¾‹åŒ–
        let { videoUpdateTime } = this.data;

        let videoItem = videoUpdateTime.find(item=>item.vid === vid);
        if(videoItem){
         this.videoContext.seek(videoItem.currentTime)
        }

        this.videoContext.play();// ç‚¹å‡»è§†é¢‘åï¼Œè‡ªåŠ¨æ’­æ”¾ `

     },


   // è§†é¢‘æ’­æ”¾å®Œåï¼Œæˆ‘ä»¬è¦åŠæ—¶çš„ä»æ’­æ”¾è®°å½•ä¸­åˆ é™¤
   // é€šè¿‡video ç»„ä»¶æ·»åŠ   bindended="handleVideoEnd"

   handleVideoEnd(event){
       let videoEndId = event.currentTarget.id;
       let { videoUpdateTime } = this.data;
       videoUpdateTime.splice(videoUpdateTime.findIndex(item=>item.vid === videoEndId),1);
       this.setData({
         videoUpdateTime
       })
   },

   ```

## æ­Œæ›²æ¨èé¡µé¢

1. æ¥æ”¶åˆ°çš„æ•°æ®æ˜¯ ã€object,Objectã€‘å¦‚ä½•è§£å†³ï¼Ÿ

   å› ä¸ºåœ¨ url åœ°å€ä¸­ï¼Œæ˜¯ä¸èƒ½æœ‰ js å¯¹è±¡æˆ–è€…æ•°ç»„çš„ã€‚æ‰€ä»¥éœ€è¦é€šè¿‡ JSON.stringify() è½¬æ¢æˆå­—ç¬¦ä¸²ä¼ è¾“ï¼Œå†ç”¨ JSON.parse() è§£æ

2. é”™è¯¯æç¤º `Unexpected end of JSON input` è¯´æ˜ ä¼ è¾“çš„ JSON æ•°æ®æ˜¯ é”™è¯¯çš„ã€‚åŸç”Ÿå°ç¨‹åºçš„ä¼ å‚é•¿åº¦æœ‰é™åˆ¶ã€‚

## éŸ³ä¹æ’­æ”¾é¡µé¢

1. æ’­æ”¾éŸ³ä¹

   è·å–**å…¨å±€å”¯ä¸€**çš„èƒŒæ™¯éŸ³é¢‘ç®¡ç†å™¨ï¼Œç‚¹å‡»æ’­æ”¾æŒ‰é’®ï¼Œè·å–éŸ³ä¹çš„æ’­æ”¾ ğŸ”— mp3 å’Œ titleï¼Œå¹¶è®¾ç½®ç»™ éŸ³é¢‘ç®¡ç†å™¨å³å¯è‡ªåŠ¨æ’­æ”¾

   ```js
   async musicControl(isPlay,musicId){
       let backgroundAudioManager = wx.getBackgroundAudioManager();
       if(isPlay){ // éŸ³ä¹çš„æ’­æ”¾
         // è·å–æ­Œæ›²çš„æ’­æ”¾è¿æ¥
         let songData = await request('/song/url',{id:musicId})
         let musicLink = songData.data[0].url;
         // åˆ›å»ºæ§åˆ¶éŸ³ä¹æ’­æ”¾çš„å®ä¾‹å¯¹è±¡
        backgroundAudioManager.src= musicLink;
        backgroundAudioManager.title=this.data.song.name;
      }else{     // éŸ³ä¹çš„æš‚åœ
         this.backgroundAudioManager.pause(;
      }
    },
   ```

2. è§£å†³ ä»»åŠ¡çŠ¶æ€æ  çš„ æ’­æ”¾/æš‚åœ ä¸ å°ç¨‹åºéŸ³ä¹çš„æ’­æ”¾/æš‚åœ ä¸ä¸€è‡´ çš„é—®é¢˜

   æ–¹æ³• ï¼š é€šè¿‡ backgroundAudioManager.onPlay / onPause æ¥ ç›‘å¬èƒŒæ™¯éŸ³ä¹æ’­æ”¾/æš‚åœ

   ```js
   åœ¨ Onloadäº‹ä»¶ä¸­

       // åˆ›å»ºæ§åˆ¶éŸ³ä¹æ’­æ”¾å™¨å®ä¾‹
       this.backgroundAudioManager = wx.getBackgroundAudioManager();
       // ç›‘å¬éŸ³ä¹æ’­æ”¾å™¨æ’­æ”¾/æš‚åœ
       this.backgroundAudioManager.onPlay(()=>{
           // ä¿®æ”¹éŸ³ä¹æ’­æ”¾çš„çŠ¶æ€
           this.setData({
             isPlay:true
           })
         })
       this.backgroundAudioManager.onPause(()=>{
         this.setData({
           isPlay:false
         })
       })
     },
   ```

3. ä¸Šä¸€é¦–/ä¸‹ä¸€é¦–åŠŸèƒ½å®ç°

   æ¶‰åŠåˆ°ä¸¤ä¸ªé¡µé¢ä¹‹é—´çš„é€šä¿¡ï¼Œæ’­æ”¾é¡µé¢ç‚¹å‡»ä¸Šä¸€é¦–/ä¸‹ä¸€é¦–æŒ‰é’®ï¼Œæ¨èé¡µé¢ç›‘å¬åˆ°åŠ¨ä½œï¼Œå¹¶åœ¨æ¨èæ­Œæ›²æ•°ç»„ä¸­æ‰¾åˆ°å¯¹åº”çš„ä¸Šä¸€ä¸ª/ä¸‹ä¸€ä¸ª æ­Œæ›²ï¼Œè¿”å›ç»™æ’­æ”¾é¡µé¢ ç›¸åº”çš„æ­Œæ›² idã€‚ æ’­æ”¾é¡µé¢è°ƒå– api è·å–æ­Œæ›²ä¿¡æ¯ã€‚

   å·¥å…·ï¼š å¼€æºçš„å‘å¸ƒè®¢é˜… pubSub-js

   ```js
   // å®‰è£…npm
   npm install pubsub-js
   // åœ¨é€šä¿¡çš„ä¸¤ä¸ªé¡µé¢ä¸­ å¼•å…¥ æ–‡ä»¶
   import PubSub from 'pubsub-js'
   // æ­Œæ›²æ’­æ”¾é¡µé¢ å‘å¸ƒç»™ æ¨èé¡µé¢ ç”¨æˆ·ç‚¹å‡»åŠ¨ä½œ ï¼Œ å¹¶è®¢é˜… æ¨èé¡µé¢ä¼ å›æ¥çš„ æ­Œæ›²id  æ³¨æ„è¦åŠæ—¶å–æ¶ˆ
   handleSwitch(event){
      let type = event.currentTarget.id;
      // å…³é—­å½“å‰æ’­æ”¾çš„éŸ³ä¹
      this.backgroundAudioManager.pause();
      PubSub.subscribe('musicId',(msg,musicId)=>{
        console.log(musicId);
        // è·å–æ­Œæ›²ä¿¡æ¯
        this.getSongDetail(musicId);
        // è‡ªåŠ¨æ’­æ”¾
        this.musicControl(true,musicId)
        // å–æ¶ˆè®¢é˜…
        PubSub.unsubscribe('musicId');
      })
      PubSub.publish('switchType',type)
     },

     // æ¨èé¡µé¢ è®¢é˜… æ­Œæ›²é¡µé¢å‘æ¥çš„ åŠ¨ä½œä¿¡æ¯ï¼Œç„¶åæ‰¾åˆ°å¯¹åº”çš„æ­Œæ›²id ç»™ æ­Œæ›²é¡µé¢
     PubSub.subscribe('switchType',(msg,type)=>{
         let {recommandSongs,index} = this.data;
         if(type === 'pre'){  // ä¸Šä¸€é¦–

            (index === 0) && (index = recommandSongs.length);

             index-=1;
         }else{   //ä¸‹ä¸€é¦–
           (index===recommandSongs.length-1) && (index=-1)
           index+=1;
         }
         this.setData({
           index
         })
         let musicId = recommandSongs[index].id;
         PubSub.publish('musicId',musicId)
       })


   ```

## ç™»å½•é¡µé¢

è®¾è®¡ è´¦æˆ· å¯†ç è¾“å…¥ åŸºæœ¬å¸ƒå±€ åŒæ—¶ç»™å®š ä¸¤ä¸ªè¾“å…¥æ¡† åŒä¸€ä¸ªäº‹ä»¶å¤„ç†å‡½æ•° **bindinput**

```html
<view class="input-content">
  <view class="input-item">
    <text class="tit">æ‰‹æœºå·ç :</text>

    <input
      type="text"
      placeholder="è¯·è¾“å…¥æ‰‹æœºå·ç "
      data-test="abc"
      data-type="phone"
      id="phone"
      bindinput="handleInput"
    />
  </view>
  <view class="input-item">
    <text class="tit">å¯†ç :</text>
    <input
      type="password"
      placeholder="è¯·è¾“å…¥å¯†ç "
      data-test="abc"
      data-type="password"
      id="password"
      bindinput="handleInput"
    />
  </view>
</view>
```

åˆå§‹åŒ– ç”¨æˆ·å/å¯†ç 

```
  data: {
    phone: '',//æ‰‹æœºå·
    password: ''//å¯†ç 
  },
```

ä½†æ˜¯ä¸ºäº† åŒºåˆ† æ˜¯ ç”¨æˆ·å/å¯†ç ã€‚æˆ‘ä»¬éœ€è¦ç”¨`id` å±æ€§æ¥åŒºåˆ† ï¼Œå¹¶é€šè¿‡ `event.detail.value`æ¥è·å¾—è¾“å…¥çš„å€¼

```
  handleInput(event){
    let type = event.currentTarget.id;
    this.setData({
      [type]: event.detail.value
    })
  },
```

å°† ç”¨æˆ·å/å¯†ç è¿›è¡Œ æ­£åˆ™è¡¨è¾¾å¼éªŒè¯ å¹¶å‘èµ·è¯·æ±‚

```css
async login(){
    //å¾—åˆ°æ•°æ®
    let {phone,password} = this.data;
    //éªŒè¯
    //æ‰‹æœºå·ä¸ä¸ºç©º
    if(!phone){
      wx.showToast({
        title: 'æ‰‹æœºå·ä¸èƒ½ä¸ºç©º',
        icon: 'none'
      })
      return;
    }
    //æ­£åˆ™éªŒè¯æ˜¯ä¸€ä¸ªæ‰‹æœºå·
    //æ­£åˆ™è¡¨è¾¾å¼
    let phoneReg = /^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\d{8}$/;
    if(!phoneReg.test(phone)){
      wx.showToast({
        title: 'æ‰‹æœºå·æ ¼å¼é”™è¯¯',
        icon: 'none'
      })
      return;
    }
    //å¯†ç ä¸ä¸ºç©º
    if(!password){
      wx.showToast({
        title: 'å¯†ç ä¸èƒ½ä¸ºç©º',
        icon: 'none'
      })
      return;
    }
    //åç«¯éªŒè¯
    let result = await request('/login/cellphone',{phone,password,isLogin:true});
    if(result.code === 200){
      wx.showToast({
        title: 'ç™»é™†æˆåŠŸ',
      })
      //å­˜å‚¨ä¸ªäººä¿¡æ¯
      wx.setStorageSync('userInfo', JSON.stringify(result.profile))
      //ä»ç™»å½•é¡µè¿”å›ä¸ªäººä¸­å¿ƒé¡µ
      wx.reLaunch({
        url: '/pages/my/my'
      })
    }else if(result.code === 400){
      wx.showToast({
        title: 'æ‰‹æœºå·é”™è¯¯',
        icon: 'none'
      })
    }else if(result.code === 502){
      wx.showToast({
        title: 'å¯†ç é”™è¯¯',
        icon: 'none'
      })
    }else{
      wx.showToast({
        title: 'ç™»é™†å¤±è´¥ï¼Œè¯·é‡æ–°ç™»å½•',
        icon: 'none'
      })
    }

  },
```

# æ³¨æ„äº‹é¡¹

1. å°ç¨‹åº å‘èµ·è¯·æ±‚ å¿…é¡» ç”¨ https åè®® ï¼Œæœ€å¤§å¹¶å‘é™åˆ¶ 10 ä¸ª

2. åœ¨å‘èµ· localhost: 3000/banner è¯·æ±‚æ—¶ï¼ŒæŠ¥é”™ ï¼http://localhost:3000 ä¸åœ¨ä»¥ä¸‹ request åˆæ³•åŸŸååˆ—è¡¨ä¸­ã€‚

   è§£å†³æ–¹å¼ï¼šæœåŠ¡å™¨é¡»å¤‡æ¡ˆ

   1. ç™»å½•å°ç¨‹åº [(å°ç¨‹åº.com)](https://mp.weixin.qq.com/wxamp/devprofile/get_profile?token=592424894&lang=zh_CN) è¿›è¡ŒæœåŠ¡å™¨é…ç½® å¹¶ä¸” æœ€å¤š äºŒåä¸ªåŸŸå
   2. è‹¥æ²¡æœ‰æœåŠ¡å™¨åˆ™ å¯ä»¥ é€‰æ‹© ç‚¹å‡»è¯¦æƒ…é¡µ é€‰æ‹© ä¸æ£€éªŒåˆæ³•åŸŸå

   ![image-20211201102306352](https://techliuimg.oss-cn-beijing.aliyuncs.com/img/202112011023168.png)

3. **çœŸæœºè°ƒè¯•** åŠ¨æ€æ•°æ® æ˜¾ç¤ºä¸å‡ºæ¥çš„é—®é¢˜

   è§£å†³æ–¹æ³• ï¼š å†…ç½‘ç©¿é€ **é€šè¿‡å¤–ç½‘åŸŸå è®¿é—®ä½ çš„å†…ç½‘ 127.0.0.1**

   å·¥å…· ï¼š utools çš„ å†…ç½‘ç©¿é€å·¥å…·

4. é€šè¿‡ id å‘ event ä¼ å€¼æ—¶ï¼Œä¼š**è‡ªåŠ¨å°† number æ•°æ® è½¬æ¢æˆ string ç±»å‹**ã€‚

   ```js
    // id="{{item.id}}">   idæ˜¯ numberæ•°æ®ç±»å‹ï¼ˆåŸæœ‰ç±»å‹ï¼‰

     <view class="navContent {{item.id === navId ? 'active' : ''}} " bindtap="changeNav" id="{{item.id}}">
     </view>

     // js ç‚¹å‡»äº‹ä»¶ä¸­
       changeNav(event){
       let navId = event.currentTarget.id;  // ä¼šå°†numberè½¬æ¢æˆ string
       this.setData({
         navId:navId
       })
     },
   ```

   è§£å†³æ–¹æ³•ï¼š

   1. navId:navId\*1
   2. æˆ–è€…ç”¨ä½ç§» navId:navId>>0
   3. ç”¨ `data-id` ="{{item.id }}" æ¥ä¼ å€¼ï¼Œ ç”¨ `event.currentTarget.dataset.id` æ¥ å–å€¼

## npm åŒ…çš„ä½¿ç”¨

1. åˆå§‹åŒ– init `npm init -y`

2. å®‰è£…å¾®ä¿¡å°ç¨‹åºä¾èµ–åŒ… `npm i miniprogram-sm-crypto --production `

3. å®‰è£… npm åŒ… `npm install [åŒ…å]`

4. å¼€å‘è€…å·¥å…· - è¯¦æƒ…- ä½¿ç”¨ npm

   ![image-20211208154722899](https://techliuimg.oss-cn-beijing.aliyuncs.com/img/202112081547079.png)

5. å·¥å…· - æ„å»º npm å®Œæˆï¼
